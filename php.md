# Верстка на PHP

Как уже было сказано, вся верстка делается в PHP файлах, при этом PHP знать почти не обязательно - пишите обычный HTML.

Для верстки предусмотрены 2 папки: `templates/components/` и `templates/pages/`.

## Компоненты

В `components/` кладутся куски кода, которые встречаются более, чем на одной странице (хедер, футер и т.п.). Таким образом, мы пишем код всего один раз и подключаем его, где хотим через директиву `include` или функцию `tpl()` (которая делает тот же самый `include`, но чуть гибче).

```php
<? 
tpl(
  string $fileName, // Путь относительно папки /templates/
  array $localVars  // Массив локальных переменных, которые будут доступны внутри файла
);
?>
```

Следующий код подключит соответствующий файл, внутри которого будут доступны переменные `$foo1` и `$foo2`:

```php
<?		
tpl(
  'components/news/detail.tpl.php', 
  [
    'foo1' => $bar1, 
    'foo2' => $bar2
  ]
); 
?>
```

## Страницы

В `pages/` кладутся непосредственно страницы сайта (index, news, contatcs и т.п.). Под страницей подразумевается кусок сайта между хедером и футером. Страницы могут включать в себя как компоненты, так и уникальный код.

По умолчанию в проекте уже лежит главная страница `index.php`. Рассмотрим базовую структуру страниц на ее примере:
```php
<?
define('PAGE_TITLE','Главная'); // Заголовок для тега <title/>
define('PAGE_SECTION_ID','0'); // ID страницы
define('PAGE_JS_VIEW','Index'); // Backbone View, привязанный к странице
?>

<div class="page page--index" data-view="<?=PAGE_JS_VIEW?>"> ... </div> // Корневой элемент для привязки Backbone View
```

Внутри каждой страницы нужно обязательно определять Backbone View в атрибуте `data-view`. Backbone View используется для роутинга и содержит весь js, который иcпользуется на странице. Подробнее об этом написано в разделе [Скрипты](js.md).

## Точка входа

В папке `templates/` лежит файл `BODY.tpl.php` - в нем подключаются все компоненты, перечисленные выше, а также находится точка входа для всех страниц сайта (переменная `<?=$CONTENT?>`). 

## Итого

Таким образом, чтобы создать страницу новостей, нужно в папке `pages/` создать файл `news.php` (не забудьте внутри определить Backbone View). Файл автоматически подхватится точкой входа и станет доступен по адресу `http://127.0.0.1/<имя_проекта>/news`.

Если вы определились, что будете верстать в PHP файлах, то можете удалить папку `templates/src/jade/` и сразу перейти к разделу [Стили](css.md).
