# Спрайты

Перед тем как начать собирать спрайты, не забудьте поставить соответствующие npm пакеты из `templates/package.json` (см. [Разворачивание проекта](deployment.md)) и настроить `gulp-config.js` (см. [Сборка проекта](build.md)).

Все исходники для спрайтов хранятся в папке `templates/src/sprites/`. Во время разработки спрайты собираются в `templates/src/images/`. А при запуске `gulp release` оттуда копируются в `templates/build/images/`.

Для большинства спрайтов автоматически создаются и обновляются CSS миксины. Ниже все объяснения будут на примере Less миксинов.

## PNG спрайты

Чтобы собрать PNG спрайт для страницы новостей, нужно зайти в `templates/src/sprites/png/`, создать папку `news` и положить в нее необходимые картинки. Сборщик соберет их в спрайт `news.png` (согласно названию папки) и положит в `templates/src/images/png-sprites/`.

Также сборщик соберет `news.less` со всеми необходимыми миксинами и положит их в папку `templates/src/less/sprites/png-sprites`.

Чтобы быстро подключить в Less иконку из спрайта, нужно добавить миксин `.bg-png(@png-<ИМЯ_КАРТИНКИ>)`. Например, вы хотите подключить картинку `favorite.png` \(которую предварительно положили в `templates/src/sprites/png/news/`\). Для этого нужно написать `.bg-png(@png-favorite)`.

```less
.selector {
  .bg-png(@png-favorite);
}
```

Остальные варианты подключения можно будет найти в `templates/src/less/sprites/png-sprites/news.less`.

## SVG спрайты

Чтобы собрать SVG спрайт, нужно зайти в `templates/src/sprites/svg/` и положить в нее необходимые svg картинки \(обратите внимание: никаких дополнительных папок создавать не нужно\). Сборщик настроен на сборку SVG спрайтов в двух режимах одновременно: режиме CSS и режиме symbol. На выходе получатся 2 соответствующих спрайта: `sprite.svg` и `symbols.svg`. Сборщик положит их в `templates/src/images/`.

Эти два режима отличаются от остальных \(инлайн в HTML, инлайн в CSS, base64, SVG-stack\) почти 100%-й поддержкой во всех современных браузерах \(начиная с IE9 включительно\), кешируемостью, быстродействием и удобством работы. Подробнее об этом можно почитать, например, [тут](https://habrahabr.ru/post/276463/).

Подключение иконки из `sprite.svg` аналогично подключению png спрайта за рядом исключений:

* спрайт собирается в папку `templates/src/images/`;
* миксины кладутся в `templates/src/less/sprites/svg-sprite.less`;
* иконка в Less подключается миксином `.bg-svg(@svg-<ИМЯ_КАРТИНКИ>)` (остальные варианты см. в `svg-sprite.less`).

Для подключения иконки из `symbols.svg` предусмотрен специальный PHP компонент, который упрощает подключение.

```php
<? component('svg.tpl',['id'=>'<ИМЯ_КАРТИНКИ>']); ?>
```

Например, вы хотите подключить картинку `favorite.svg` \(которую предварительно положили в `templates/src/sprites/svg/`\). Для этого нужно написать:

```php
<? component('svg.tpl',['id'=>'favorite']); ?>
```

Аналогичный модуль доступен в Jade. См. [Верстка на Jade](jade.md).

```jade
include ../modules/_modules
+module(MODULE.SVG,{id:'favorite'})
```

Если по какой-то причине вы не видите изменений в спрайтах, попробуйте удалить их из `templates/src/images/` и заново запустить сборку.