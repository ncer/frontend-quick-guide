# Настройка резины на rem

Управление резиной осуществляется в `templates/src/js/components/Adaptive.js`. В большинстве случаев достаточно лишь правильно указать базовые опции в объекте `cfgs`. Для определения устройства используется библиотека [Device.js](https://github.com/matthewhudson/current-device/tree/02233eaaf51f993c762f770e42fbe537872dd3fe).

## Описание опций

```
<class> : {                                                    // Условия выставления класса <class>
    if: <if>                                                   // условие (функция(<data>,<cfg>)) <data> содержит $el, elWidth, elHeight
    element: < selector || element || $element || domKey >,    // элемент по которому происходят расчеты размеров
    rem: <px>                                                  // коэфициент перевода rem => px (отменяет зависимость по base)
    from: {                                                    //
        width: <fromWidth> ,                                   // Минимальная ширина элемента
        height: <fromHeight>                                   // Минимальная высота элемента
    },
    to: {
        width: <toWidth> ,                                     // Максимальная ширина элемента
        height: <toHeight>                                     // Максимальная высота элемента
    },
    base: {
        width: <toWidth> ,                                     // Базовая ширина элемента для расчета коэфициента
        height: <toHeight>                                     // Базовая высота элемента для расчета коэфициента
    },
    k: <k>,                                                    // Дополнительный коэффициент
    setClass: false || true || <class>,                        // выставлять класс при выполнении условий
    setNoClass: false || true || <class>,                      // выставлять класс при невыполнении условий
    setDeviceType: true || false || <type>,                    // устанавливать новый deviceType при соответствии условиям (key <class> из конфигурации или конкретный <type>)
}
```

## Выставление классов для устройств

Простейшая настройка выглядит следующим образом:

```js
this.cfgs = {
    'desktop': {
        if: device.desktop, // Если устройство определено как desktop
        setClass: true,     // Выставить класс 'desktop'
        setNoClass: true,   // На других устройствах выставить класс 'no-desktop'
        setDeviceType: true // Принудительно установить тип устройства как desktop
    },
   'tablet': {...},
   'mobile': {...},

}
```

По умолчанию все указанные классы добавляются к элементу `<html/>`. Таким образом, настроив выставление классов, можно сразу же пользоваться ими в css.

```css
.article {
  width: 33%;
}

.tablet .article {
  width: 50%;
}

.mobile .article {
  width: 100%;
}
```

## Добавление резины

В примере выше мы настроили добавление классов на страницу в зависимости от устройства. Однако там еще не подключена резина. Предположим, ширина контентной части в макете = 1200px. Соответственно на разрешениях меньше 1200px лэйаут начнет ломаться. Чтобы этого не происходило, нужно включать резину на этих разрешениях.

```js
this.cfgs = {
    'desktop': {
        if: device.desktop,
        setClass: true,
        setNoClass: true,
        setDeviceType: true
    },
    'desktop:wide': {
        if: device.desktop,    // Если устройство определено как desktop
        rem: 10,               // Использовать для расчета базовый коэффициент (отключает скейл)
        from: {
            width: 1200        // Применить от 1200px по ширине
        }
    },
    'desktop:thin': {
        if: device.desktop,    // Если устройство определено как desktop
        base: {
            width: 1200        // Использовать для расчета базовую ширину (включает скейл)
        },
        to: {
            width: 1200        // Применить до 1200px по ширине
        }
    },
    'tablet': {...},
    'mobile': {...},
}
```

**Обратите внимание**: опция `rem` отключает скейл страницы, в то время как `base`, наоборот, включает. Приоритет у `rem` выше, чем у `base`, поэтому писать их вместе бессмысленно.

## Выставление классов в зависимости от ширины экрана

Иногда бывает нужно, чтобы мобильная/планшетная версии зависели не от устройства, а от ширины экрана. Например, чтобы мобильная версия включалась до 767px, планшетная - от 768px до 1023px, десктопная - от 1024px. Сделать это совсем не сложно:

```js
this.cfgs = {
  'mobile': {
    setClass: true,
    setNoClass: true,
    to: {
      width: 767
    }
  },
  'tablet': {
    setClass: true,
    setNoClass: true,
    from: {
      width: 768
    },
    to: {
      width: 1023
    }
  },
  'desktop': {
    setClass: true,
    setNoClass: true,
    from: {
      width: 1024
    }
  }
}
```

## Выставление классов для горизонтальной/вертикальной ориентации

Иногда бывает нужно детектить портретную и/или ландшафтную ориентацию устройства. Например, чтобы в ландшафтной ориентации ставить заглушку "Переверните устройство". Всю работу будет выполнять `Device.js`, нам лишь нужно написать правильный конфиг:

```js
this.cfgs = {
  'landscape': {
    if: device.landscape, // Если устройство определено как landscape
    setClass: true,       // Выставить класс 'landscape'
  }
}
```